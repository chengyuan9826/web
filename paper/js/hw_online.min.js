$(function(){lookAnalytic($(".analysis_btn .btn"));mask_circle();showHd();downList($(".hd-button .name"));currentAndSum();function a(){}a.prototype.slider=function(g,k){document.addEventListener("touchmove",function(i){i.preventDefault()},false);var h=g.parent();var e=g.length;for(var f=0;f<e;f++){$("<a>").appendTo(h.next())}$("a").eq(0).addClass("active");var j=(1/e)*100;g.css("width",j+"%");h.css("width",e*100+"%");g.swipeLeft(function(i){if($(this).parent().hasClass("small-questions")&&$(this).index()==$(this).parent().children().length-1){}else{i.stopPropagation();c.swipe(this,1,e-1,k)}});g.swipeRight(function(i){if($(this).parent().hasClass("small-questions")&&$(this).index()==0){}else{i.stopPropagation();c.swipe(this,-1,0,k)}})};a.prototype.swipe=function(p,n,e,o){var m=o.length;var k=$(p).index();var j=(1/m)*100;var l=-j*(k+n)+"%";if(k==e){return false}$(p).parent().css({"-webkit-transform":"translate("+l+")","-moz-transform":"translate("+l+")",transform:"translate("+l+")","-webkit-transition":"500ms linear","-moz-transition":"500ms linear",transition:"500ms linear"});$(p).parent().children().removeClass("current");var h=$(p).next();if(n<0){h=$(p).prev()}h.addClass("current");currentAndSum();if(h.find(".small-questions").length){var g=h.find(".small-questions li.current");g=g.length?g:n>0?h.find(".small-questions li").first():h.find(".small-questions li").last();h.find(".small-questions li").removeClass("current");g.addClass("current");var f=g.attr("data-quesid")}else{var f=h.attr("data-quesid")}if($(".section_list .aside_section").eq(k+n).find(".more_msg").length){myScroll=new IScroll($(".section_list .aside_section").eq(k+n).find(".more_msg")[0])}if(!$(p).parent().hasClass("small-questions")){if($(".section_list .aside_section").eq(k+n).find(".question_scroll").length){myQScroll=new IScroll($(".section_list .aside_section").eq(k+n).find(".question_scroll").parent()[0])}if($(".section_list .aside_section").eq(k+n).find(".small-questions").length){var i=$(".section_list .aside_section").eq(k+n).find(".small-questions>li");c.slider(i,i)}}else{if($(p).parent().parent().find(".small-questions>li").eq(k+n).length){myQScroll=new IScroll($(p).parent().parent().find(".small-questions>li").eq(k+n)[0])}}return this};var c=(function(){return new a()})();var b=$(".section_list>section");c.slider(b,$(".section_list>section"));var d=$(".small-questions>li").first().parent().children();c.slider(d,d);if($(".section_list .aside_section .more_msg")){myScroll=new IScroll(".question_title_more .more_msg")}if($(".section_list .aside_section")){myQScroll=new IScroll(".section_list .aside_section")}$(".aside_section").delegate(".question_choose","tap",function(){var g=$(this).parent().parent().parent().parent().parent();if(g.find(".title_type").attr("data-type")!="duo"){if(g.attr("data-parentid")){$(this).addClass("correct");$(this).parent().siblings("li").find(".question_choose").removeClass("correct");var i=1;var e=g.parent().children().length;var f=g.index();if(f==e-1){var h=g.parents(".aside_section");c.swipe(h,1,h.parent().children().length-1,h.parent().children())}else{c.swipe(g,1,e-1,g.parent().children())}}else{$(this).addClass("correct");$(this).parent().siblings("li").find(".question_choose").removeClass("correct");var i=1;var e=b.length;c.swipe(g,1,e-1,$(".section_list>section"))}}else{if($(this).hasClass("correct")){$(this).removeClass("correct")}else{$(this).addClass("correct")}}});$('.question_order .question_choose[data-quesid="114"]').trigger("tap")});function lookAnalytic(a){a.on("click",function(){if($(this).hasClass("active")){$(this).removeClass("active");$(this).parents(".question-analytic").find(".analysis_info").hide()}else{$(this).addClass("active");$(this).parents(".question-analytic").find(".analysis_info").show()}myQScroll.refresh()})}function mask_circle(a){if(!a){var b=a}else{var b=$(".mask span").text()}if(b<=50){$(".pie_right").css("transform","rotate("+($(".mask span").text()*3.6)+"deg)")}else{$(".pie_right").css("transform","rotate(180deg)");$(".pie_left").css("transform","rotate("+(($(".mask span").text()-50)*3.6)+"deg)")}}function showHd(){var a=true;$(".side-icon").on("click",function(){if(a){$(this).next(".side-nav").animate({height:"6rem"});a=false}else{$(this).next(".side-nav").animate({height:0});a=true}});$(".side-nav .submit-icon").on("click",function(){$(".dialog").show();$(this).parents(".side-nav").animate({height:0});$(".cancle_button").tap(function(){$(".dialog").hide()});$("#submit-btn").tap(function(){$(".dialog").hide();window.location.href="test-result.html"});a=true});$(".side-nav .ck-icon").on("click",function(){$(this).addClass("clicked").parents(".side-nav").animate({height:0});a=true})}function downList(a){a.on("click",function(){var c=$(".shadow");var b=$(this);if($(this).hasClass("active")){$(this).removeClass("active").next().hide();c.hide()}else{$(this).addClass("active").next().show();c.show();c.on("click",function(){b.removeClass("active").next().hide();$(this).hide()});new SelectItem($(".down-list").eq(0));new SelectItem($(".down-list").eq(1))}})}function SelectItem(a){this.name="";this.list=$(a);this.showLight();this.cancel($(".down-btn .cancel"));this.sure($(".down-btn .sure"))}SelectItem.prototype.showLight=function(){this.list.find("li").on("click",function(){$(this).addClass("active").siblings().removeClass("active")})};SelectItem.prototype.cancel=function(a){a.on("click",function(){$(".shadow").hide();$(".down-box").hide().prev(".name").removeClass("active")})};SelectItem.prototype.sure=function(a){var b=this;a.on("click",function(){b.name=b.list.find(".active").text();if(b.name!=""&&b.name!=null){$(".shadow").hide();$(".down-box").hide().prev(".name").removeClass("active")}})};function currentAndSum(){var a=$(".aside_section").length;var b=parseInt($(".aside_section.current").index())+1;$(".question_sum").text(a);$(".question_num").text(b)};