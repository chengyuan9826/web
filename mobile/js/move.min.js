var nowpage=0;var $he=$(window).height();$(function(){$(".page").height($he);$(".navBtn").on("touchstart",function(a){$(this).next(".nav").slideDown();return false});$(".nav").find("a").on("touchstart",function(){var b=$(this);var a=b.parent("li").index();goToModel(b,a);$(this).parents(".nav").slideUp(200);return false});$(".page-index-icon").on("touchstart",function(){var b=$(this);var a=b.index();goToModel(b,a);return false});$("body").on("touchstart",function(a){$(".navBtn").next(".nav").slideUp();return false});fullPage()});function fullPage(){var b=$(".page-table").length;var a=["首页","政教处","校长","会计","教务处","班主任","学生/家长","老师","党团委","总务处","用户案例"];$(".page-contains").swipe({swipe:function(d,f,g,e,c){if(f=="up"){nowpage=nowpage+1}else{if(f=="down"){nowpage=nowpage-1}}if(nowpage>b-1){nowpage=b-1}if(nowpage<0){nowpage=0}moveDown($(".page-table"));$(".page-contains").animate({top:nowpage*-100+"%"},400,function(){moveUp($(".page-table").eq(nowpage));$(".pageName").text(a[nowpage])});$(".page-table").eq(nowpage).addClass("cur").siblings().removeClass("cur")}})}function goToModel(d,c){var e=d.attr("href");var a=$(e).offset().top;var b=d.text();$(".pageName").text(b);$(".page-contains").animate({top:-c*100+"%"},800,function(){moveUp($(e))});return false}function moveUp(a){a.find(".page-des img").animate({width:"100%",opacity:1},600,function(){a.find(".page-text p:nth-child(2n)").animate({right:0,opacity:1},500);a.find(".page-text p:nth-child(2n+1)").animate({left:0,opacity:1},500);a.find(".page-text-1 p").css({width:"auto"});a.find(".page-text-2").animate({opacity:1},400);a.find(".page-text .page-tip").animate({opacity:1},400)});a.find(".page-down").animate({bottom:0},600)}function moveDown(a){a.find(".page-des img").animate({width:"60%",opacity:0.2},10);a.find(".page-text p:nth-child(2n)").animate({right:"100%",opacity:0},10);a.find(".page-text p:nth-child(2n+1)").animate({left:"100%",opacity:0},10);a.find(".page-text-1 p").css({width:0});a.find(".page-text-2").animate({opacity:0},10);a.find(".page-text .page-tip").animate({opacity:0},10);a.find(".page-down").animate({bottom:"-48%"},10)};